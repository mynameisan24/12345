<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <title>DONUT PLANET</title>

    <link rel="icon" href="https://8.school.zt.ua/wp-content/themes/shkolazt/img/official/prapor-Ukrayini.png"
        type="image/png">
    <link rel="stylesheet" href="style.css" media="all">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Agdasima:wght@400;700&family=Boldonse&family=Bytesized&family=Dosis:wght@200..800&family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Marcellus&family=Tektur:wght@400..900&display=swap"
        rel="stylesheet">

</head>

<body class="m-0 p-0 bg-white d-flex flex-column justify-content-center align-items-center">

    <header
        class="m-0 p-4 pt-2 pb-2 container-fluid position-fixxed row justify-content-between border-bottom bg-gray ">
        <div class="m-0 p-0 col-auto row">
            <i class="dp_icon pe-2 col-auto fa-solid fa-moon"></i>
            <div class="dp_title col-auto">DONUT PLANET</div>
        </div>

        <div class="m-0 p-0 col-auto row d-none d-lg-block">
            <div style="font-size: 18px;" class="dp_title col-auto">üéÅ Bestelle vor 15 Uhr f√ºr Lieferung am n√§chsten
                Tag!</div>
        </div>

        <div class="m-0 p-0 col-auto row">
            <i class="dp_icon pe-2 col-auto fa-solid fa-basket-shopping"></i>
            <div class="dp_title col-auto d-none d-sm-block">Warenkorb</div>
        </div>
    </header>

    <section class="m-0 p-3 container-fluid row ">

        <div id="usersContainer"></div>

    </section>




    <script type="module" src="index.js" defer></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getDatabase, ref, set, onValue, remove } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";
        // üî∫ –¥–æ–¥–∞–Ω–æ `remove`

        const firebaseConfig = {
            apiKey: "AIzaSy...",
            authDomain: "my-shop.firebaseapp.com",
            databaseURL: "https://donut-planet-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "my-shop",
            storageBucket: "my-shop.appspot.com",
            messagingSenderId: "1234567890",
            appId: "1:1234567890:web:abcd1234"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        const usersRef = ref(db, "users");
        const container = document.getElementById("usersContainer");

        // üîµ READ
        onValue(usersRef, (snapshot) => {
            container.innerHTML = "";
            if (!snapshot.exists()) {
                container.innerHTML = "<p>–ù–µ–º–∞—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</p>";
                return;
            }

            const users = snapshot.val();
            let index = 1;

            Object.keys(users).forEach(key => {
                const user = users[key];
                const userDiv = document.createElement("div");
                userDiv.style.border = "1px solid #ccc";
                userDiv.style.margin = "5px";
                userDiv.style.padding = "8px";
                userDiv.innerHTML = `
                    <strong>#${index++}</strong><br>
                    ip: ${user.ip || "-"}<br>
                    timestamp: ${user.timestamp || "-"}<br>
                    userAgent: ${user.userAgent || "-"}<br>
                    page: ${user.page || "-"}<br>

                    Image: ${user.image || "-"}<br>
                    –Ü–º‚Äô—è: ${user.name || "-"}<br>
                    –ö—ñ–ª—å–∫—ñ—Å—Ç—å: ${user.amount || "-"}<br>
                    –¶—ñ–Ω–∞: ${user.price || "-"}<br>

                    <button 
                      onclick="deleteUser('${key}')" 
                      style="margin-top: 5px; background-color: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">
                      üóëÔ∏è Delete
                    </button>
                `;
                container.appendChild(userDiv);
            });
        });

        // üî¥ DELETE
        window.deleteUser = function (key) {

            remove(ref(db, "users/" + key))
                .catch(err => alert("Error: " + err));
        };













        //////
    </script>



</body>

</html>